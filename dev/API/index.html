<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · PlantMeteo.jl</title><meta name="title" content="API · PlantMeteo.jl"/><meta property="og:title" content="API · PlantMeteo.jl"/><meta property="twitter:title" content="API · PlantMeteo.jl"/><meta name="description" content="Documentation for PlantMeteo.jl."/><meta property="og:description" content="Documentation for PlantMeteo.jl."/><meta property="twitter:description" content="Documentation for PlantMeteo.jl."/><meta property="og:url" content="https://PalmStudio.github.io/PlantMeteo.jl/API/"/><meta property="twitter:url" content="https://PalmStudio.github.io/PlantMeteo.jl/API/"/><link rel="canonical" href="https://PalmStudio.github.io/PlantMeteo.jl/API/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PlantMeteo.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting-started/">Getting Started</a></li><li><span class="tocitem">Guides</span><ul><li><a class="tocitem" href="../weather-apis/">Weather Data Sources</a></li><li><a class="tocitem" href="../weather-sampling/">Weather Sampling</a></li></ul></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#API-documentation"><span>API documentation</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/PalmStudio/PlantMeteo.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/main/docs/src/API.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#PlantMeteo.ATMOSPHERE_COMPUTED"><code>PlantMeteo.ATMOSPHERE_COMPUTED</code></a></li><li><a href="#PlantMeteo.ATMOSPHERE_NONSTANDARD_NAMES"><code>PlantMeteo.ATMOSPHERE_NONSTANDARD_NAMES</code></a></li><li><a href="#PlantMeteo.DEFAULT_OPENMETEO_HOURLY"><code>PlantMeteo.DEFAULT_OPENMETEO_HOURLY</code></a></li><li><a href="#PlantMeteo.OPENMETEO_MODELS"><code>PlantMeteo.OPENMETEO_MODELS</code></a></li><li><a href="#PlantMeteo.AbstractAPI"><code>PlantMeteo.AbstractAPI</code></a></li><li><a href="#PlantMeteo.AbstractAtmosphere"><code>PlantMeteo.AbstractAtmosphere</code></a></li><li><a href="#PlantMeteo.AbstractSamplingWindow"><code>PlantMeteo.AbstractSamplingWindow</code></a></li><li><a href="#PlantMeteo.AbstractTimeReducer"><code>PlantMeteo.AbstractTimeReducer</code></a></li><li><a href="#PlantMeteo.Atmosphere"><code>PlantMeteo.Atmosphere</code></a></li><li><a href="#PlantMeteo.CalendarWindow"><code>PlantMeteo.CalendarWindow</code></a></li><li><a href="#PlantMeteo.Constants"><code>PlantMeteo.Constants</code></a></li><li><a href="#PlantMeteo.FirstReducer"><code>PlantMeteo.FirstReducer</code></a></li><li><a href="#PlantMeteo.FirstReducer-Tuple{AbstractVector}"><code>PlantMeteo.FirstReducer</code></a></li><li><a href="#PlantMeteo.LastReducer-Tuple{AbstractVector}"><code>PlantMeteo.LastReducer</code></a></li><li><a href="#PlantMeteo.LastReducer"><code>PlantMeteo.LastReducer</code></a></li><li><a href="#PlantMeteo.MaxReducer-Tuple{AbstractVector{&lt;:Real}}"><code>PlantMeteo.MaxReducer</code></a></li><li><a href="#PlantMeteo.MaxReducer"><code>PlantMeteo.MaxReducer</code></a></li><li><a href="#PlantMeteo.MeanReducer-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><code>PlantMeteo.MeanReducer</code></a></li><li><a href="#PlantMeteo.MeanReducer"><code>PlantMeteo.MeanReducer</code></a></li><li><a href="#PlantMeteo.MeanWeighted-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><code>PlantMeteo.MeanWeighted</code></a></li><li><a href="#PlantMeteo.MeanWeighted"><code>PlantMeteo.MeanWeighted</code></a></li><li><a href="#PlantMeteo.MeteoTransform"><code>PlantMeteo.MeteoTransform</code></a></li><li><a href="#PlantMeteo.MinReducer-Tuple{AbstractVector{&lt;:Real}}"><code>PlantMeteo.MinReducer</code></a></li><li><a href="#PlantMeteo.MinReducer"><code>PlantMeteo.MinReducer</code></a></li><li><a href="#PlantMeteo.OpenMeteo"><code>PlantMeteo.OpenMeteo</code></a></li><li><a href="#PlantMeteo.OpenMeteoUnits"><code>PlantMeteo.OpenMeteoUnits</code></a></li><li><a href="#PlantMeteo.PreparedWeather"><code>PlantMeteo.PreparedWeather</code></a></li><li><a href="#PlantMeteo.RadiationEnergy"><code>PlantMeteo.RadiationEnergy</code></a></li><li><a href="#PlantMeteo.RadiationEnergy-Tuple{AbstractVector{&lt;:Real}}"><code>PlantMeteo.RadiationEnergy</code></a></li><li><a href="#PlantMeteo.RadiationEnergy-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><code>PlantMeteo.RadiationEnergy</code></a></li><li><a href="#PlantMeteo.RollingWindow"><code>PlantMeteo.RollingWindow</code></a></li><li><a href="#PlantMeteo.SumReducer"><code>PlantMeteo.SumReducer</code></a></li><li><a href="#PlantMeteo.SumReducer-Tuple{AbstractVector{&lt;:Real}}"><code>PlantMeteo.SumReducer</code></a></li><li><a href="#PlantMeteo.TimeStepTable"><code>PlantMeteo.TimeStepTable</code></a></li><li><a href="#Base.setindex!-Tuple{PlantMeteo.TimeStepRow, Any, Any}"><code>Base.setindex!</code></a></li><li><a href="#PlantMeteo.Weather-Union{Tuple{Any}, Tuple{S}, Tuple{Any, S}} where S&lt;:NamedTuple"><code>PlantMeteo.Weather</code></a></li><li><a href="#PlantMeteo._build_calendar_window_cache-Tuple{PreparedWeather, CalendarWindow}"><code>PlantMeteo._build_calendar_window_cache</code></a></li><li><a href="#PlantMeteo._default_radiation_flux_vars-Tuple{}"><code>PlantMeteo._default_radiation_flux_vars</code></a></li><li><a href="#PlantMeteo._duration_period_from_seconds-Tuple{Float64}"><code>PlantMeteo._duration_period_from_seconds</code></a></li><li><a href="#PlantMeteo._duration_seconds-Tuple{Any}"><code>PlantMeteo._duration_seconds</code></a></li><li><a href="#PlantMeteo._expected_period_seconds-Tuple{Date, CalendarWindow}"><code>PlantMeteo._expected_period_seconds</code></a></li><li><a href="#PlantMeteo._normalize_reducer-Tuple{Any}"><code>PlantMeteo._normalize_reducer</code></a></li><li><a href="#PlantMeteo._normalize_single_transform-Tuple{Symbol, Any}"><code>PlantMeteo._normalize_single_transform</code></a></li><li><a href="#PlantMeteo._period_key-Tuple{DateTime, CalendarWindow}"><code>PlantMeteo._period_key</code></a></li><li><a href="#PlantMeteo._reduce_values-Tuple{AbstractVector, AbstractVector{&lt;:Real}, Any}"><code>PlantMeteo._reduce_values</code></a></li><li><a href="#PlantMeteo._sample_weather_uncached-Tuple{PreparedWeather, Int64, AbstractSamplingWindow, AbstractVector{MeteoTransform}}"><code>PlantMeteo._sample_weather_uncached</code></a></li><li><a href="#PlantMeteo._transform_signature-Tuple{AbstractVector{MeteoTransform}}"><code>PlantMeteo._transform_signature</code></a></li><li><a href="#PlantMeteo._week_start_date-Tuple{Date, Int64}"><code>PlantMeteo._week_start_date</code></a></li><li><a href="#PlantMeteo._window_bounds-Tuple{Int64, RollingWindow}"><code>PlantMeteo._window_bounds</code></a></li><li><a href="#PlantMeteo._window_indices-Tuple{PreparedWeather, Int64, AbstractSamplingWindow}"><code>PlantMeteo._window_indices</code></a></li><li><a href="#PlantMeteo.add_transformations!-NTuple{4, Any}"><code>PlantMeteo.add_transformations!</code></a></li><li><a href="#PlantMeteo.air_density-NTuple{4, Any}"><code>PlantMeteo.air_density</code></a></li><li><a href="#PlantMeteo.atmosphere_emissivity-Tuple{Any, Any, Any}"><code>PlantMeteo.atmosphere_emissivity</code></a></li><li><a href="#PlantMeteo.check_day_complete-Tuple{Any}"><code>PlantMeteo.check_day_complete</code></a></li><li><a href="#PlantMeteo.compute_date"><code>PlantMeteo.compute_date</code></a></li><li><a href="#PlantMeteo.compute_duration"><code>PlantMeteo.compute_duration</code></a></li><li><a href="#PlantMeteo.default_sampling_transforms-Tuple{}"><code>PlantMeteo.default_sampling_transforms</code></a></li><li><a href="#PlantMeteo.default_transformation-Tuple{Any}"><code>PlantMeteo.default_transformation</code></a></li><li><a href="#PlantMeteo.e_sat-Tuple{Any}"><code>PlantMeteo.e_sat</code></a></li><li><a href="#PlantMeteo.e_sat_slope-Tuple{Any}"><code>PlantMeteo.e_sat_slope</code></a></li><li><a href="#PlantMeteo.fetch_openmeteo-Union{Tuple{T}, Tuple{Any, Any, Any, Any, Any, T}} where T&lt;:OpenMeteo"><code>PlantMeteo.fetch_openmeteo</code></a></li><li><a href="#PlantMeteo.format_openmeteo!-Tuple{Any}"><code>PlantMeteo.format_openmeteo!</code></a></li><li><a href="#PlantMeteo.get_forecast-Tuple{OpenMeteo, Any, Any, Any}"><code>PlantMeteo.get_forecast</code></a></li><li><a href="#PlantMeteo.get_index_raw-Tuple{TimeStepTable, Integer}"><code>PlantMeteo.get_index_raw</code></a></li><li><a href="#PlantMeteo.get_weather-Union{Tuple{P}, Tuple{Any, Any, P}} where P&lt;:Union{StepRange{Date, Day}, Vector{Date}}"><code>PlantMeteo.get_weather</code></a></li><li><a href="#PlantMeteo.latent_heat_vaporization-Tuple{Any, Any}"><code>PlantMeteo.latent_heat_vaporization</code></a></li><li><a href="#PlantMeteo.materialize_weather-Tuple{PreparedWeather}"><code>PlantMeteo.materialize_weather</code></a></li><li><a href="#PlantMeteo.new_names-Tuple{Any}"><code>PlantMeteo.new_names</code></a></li><li><a href="#PlantMeteo.next_row"><code>PlantMeteo.next_row</code></a></li><li><a href="#PlantMeteo.next_value"><code>PlantMeteo.next_value</code></a></li><li><a href="#PlantMeteo.normalize_sampling_transforms-Tuple{AbstractVector{MeteoTransform}}"><code>PlantMeteo.normalize_sampling_transforms</code></a></li><li><a href="#PlantMeteo.parse_hour"><code>PlantMeteo.parse_hour</code></a></li><li><a href="#PlantMeteo.prepare_weather-Tuple{Any}"><code>PlantMeteo.prepare_weather</code></a></li><li><a href="#PlantMeteo.prepare_weather_sampler-Tuple{Any}"><code>PlantMeteo.prepare_weather_sampler</code></a></li><li><a href="#PlantMeteo.prev_row"><code>PlantMeteo.prev_row</code></a></li><li><a href="#PlantMeteo.prev_value"><code>PlantMeteo.prev_value</code></a></li><li><a href="#PlantMeteo.psychrometer_constant-NTuple{4, Any}"><code>PlantMeteo.psychrometer_constant</code></a></li><li><a href="#PlantMeteo.read_weather-Tuple{Any, Vararg{Any}}"><code>PlantMeteo.read_weather</code></a></li><li><a href="#PlantMeteo.rh_from_e-Tuple{Any, Any}"><code>PlantMeteo.rh_from_e</code></a></li><li><a href="#PlantMeteo.rh_from_vpd-Tuple{Any, Any}"><code>PlantMeteo.rh_from_vpd</code></a></li><li><a href="#PlantMeteo.row_struct-Tuple{PlantMeteo.TimeStepRow}"><code>PlantMeteo.row_struct</code></a></li><li><a href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>PlantMeteo.sample_weather</code></a></li><li><a href="#PlantMeteo.select_weather"><code>PlantMeteo.select_weather</code></a></li><li><a href="#PlantMeteo.standardize_columns!-Tuple{PlantMeteo.ToFileColumns, Any}"><code>PlantMeteo.standardize_columns!</code></a></li><li><a href="#PlantMeteo.sum_duration-Tuple{T} where T&lt;:(AbstractVector{&lt;:Period})"><code>PlantMeteo.sum_duration</code></a></li><li><a href="#PlantMeteo.timesteps_durations-Tuple{Vector{DateTime}}"><code>PlantMeteo.timesteps_durations</code></a></li><li><a href="#PlantMeteo.to_daily-Tuple{Any, Vararg{Any}}"><code>PlantMeteo.to_daily</code></a></li><li><a href="#PlantMeteo.vapor_pressure-Tuple{Any, Any}"><code>PlantMeteo.vapor_pressure</code></a></li><li><a href="#PlantMeteo.vpd-Tuple{Any, Any}"><code>PlantMeteo.vpd</code></a></li><li><a href="#PlantMeteo.vpd_from_e-Tuple{Any, Any}"><code>PlantMeteo.vpd_from_e</code></a></li><li><a href="#PlantMeteo.write_weather-Tuple{String, Any}"><code>PlantMeteo.write_weather</code></a></li><li><a href="#PlantMeteo.write_weather_-Tuple{String, Any}"><code>PlantMeteo.write_weather_</code></a></li><li><a href="#Tables.getcolumn-Tuple{PlantMeteo.TimeStepRow, Any}"><code>Tables.getcolumn</code></a></li></ul><h2 id="API-documentation"><a class="docs-heading-anchor" href="#API-documentation">API documentation</a><a id="API-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#API-documentation" title="Permalink"></a></h2><article><details class="docstring" open="true"><summary id="PlantMeteo.ATMOSPHERE_COMPUTED"><a class="docstring-binding" href="#PlantMeteo.ATMOSPHERE_COMPUTED"><code>PlantMeteo.ATMOSPHERE_COMPUTED</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">ATMOSPHERE_SELECT</code></pre><p>List of variables that are by default removed from the table when using <code>write_weather</code> on a TimeStepTable{Atmosphere}.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/variables.jl#L1-L5">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.ATMOSPHERE_NONSTANDARD_NAMES"><a class="docstring-binding" href="#PlantMeteo.ATMOSPHERE_NONSTANDARD_NAMES"><code>PlantMeteo.ATMOSPHERE_NONSTANDARD_NAMES</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">ATMOSPHERE_NONSTANDARD_NAMES</code></pre><p>List of variables that are by default renamed when using <a href="#PlantMeteo.write_weather-Tuple{String, Any}"><code>write_weather</code></a> on a  <code>TimeStepTable{Atmosphere}</code>, to be compatible with standard file systems (CSV, databases...).</p><ul><li><code>Cₐ</code> =&gt; <code>Ca</code></li><li><code>eₛ</code> =&gt; <code>es</code></li><li><code>ρ</code> =&gt; <code>rho</code></li><li><code>λ</code> =&gt; <code>lambda</code></li><li><code>γ</code> =&gt; <code>gamma</code></li><li><code>ε</code> =&gt; <code>epsilon</code></li><li><code>Δ</code> =&gt; <code>Delta</code></li></ul><p>The reverse procedure is done when reading a file with <a href="#PlantMeteo.read_weather-Tuple{Any, Vararg{Any}}"><code>read_weather</code></a>.</p><p><strong>See also</strong></p><p><a href="#PlantMeteo.standardize_columns!-Tuple{PlantMeteo.ToFileColumns, Any}"><code>standardize_columns!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/variables.jl#L8-L28">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.DEFAULT_OPENMETEO_HOURLY"><a class="docstring-binding" href="#PlantMeteo.DEFAULT_OPENMETEO_HOURLY"><code>PlantMeteo.DEFAULT_OPENMETEO_HOURLY</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">DEFAULT_OPENMETEO_HOURLY</code></pre><p>Default variables downloaded for an Open-Meteo forecast. See <a href="https://open-meteo.com/en/docs">here</a> for more.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/open-meteo.jl#L116-L120">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.OPENMETEO_MODELS"><a class="docstring-binding" href="#PlantMeteo.OPENMETEO_MODELS"><code>PlantMeteo.OPENMETEO_MODELS</code></a> — <span class="docstring-category">Constant</span></summary><section><div><pre><code class="language-julia hljs">OPENMETEO_MODELS</code></pre><p>Possible models for the forecast. See <a href="https://open-meteo.com/en/docs">here</a> for more details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/open-meteo.jl#L126-L130">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.AbstractAPI"><a class="docstring-binding" href="#PlantMeteo.AbstractAPI"><code>PlantMeteo.AbstractAPI</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AbstractAPI</code></pre><p>An abstract type for APIs. This is used to define the API to use for the weather forecast. You can get all available APIs using <code>subtype(AbstractAPI)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/generic_API.jl#L1-L6">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.AbstractAtmosphere"><a class="docstring-binding" href="#PlantMeteo.AbstractAtmosphere"><code>PlantMeteo.AbstractAtmosphere</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Abstract atmospheric conditions type. The suptypes of AbstractAtmosphere should describe the atmospheric conditions for one time-step only, see <em>e.g.</em> <a href="#PlantMeteo.Atmosphere"><code>Atmosphere</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/atmosphere.jl#L1-L4">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.AbstractSamplingWindow"><a class="docstring-binding" href="#PlantMeteo.AbstractSamplingWindow"><code>PlantMeteo.AbstractSamplingWindow</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AbstractSamplingWindow</code></pre><p>Abstract supertype for weather window selectors used by <a href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>sample_weather</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L210-L214">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.AbstractTimeReducer"><a class="docstring-binding" href="#PlantMeteo.AbstractTimeReducer"><code>PlantMeteo.AbstractTimeReducer</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">AbstractTimeReducer</code></pre><p>Abstract supertype for reducers used by <a href="#PlantMeteo.MeteoTransform"><code>MeteoTransform</code></a>.</p><p>Reducer implementations are expected to be callable with either:</p><ul><li><code>(vals)</code></li><li><code>(vals, durations)</code></li></ul><p>See <a href="#PlantMeteo.MeanWeighted"><code>MeanWeighted</code></a>, <a href="#PlantMeteo.SumReducer"><code>SumReducer</code></a>, and <a href="#PlantMeteo.RadiationEnergy"><code>RadiationEnergy</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L1-L11">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.Atmosphere"><a class="docstring-binding" href="#PlantMeteo.Atmosphere"><code>PlantMeteo.Atmosphere</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Atmosphere structure to hold all values related to the meteorology / atmosphere.</p><p><strong>Arguments</strong></p><ul><li><code>date&lt;:AbstractDateTime = Dates.now()</code>: the date of the record.</li><li><code>duration&lt;:Period = Dates.Second(1.0)</code>: the duration of the time-step in Dates.Period.</li><li><code>T</code> (°C): air temperature</li><li><code>Wind</code> (m s-1): wind speed</li><li><code>Rh</code> (0-1): relative humidity (can be computed using <code>rh_from_vpd</code>)</li><li><code>P = DEFAULTS.P</code> (kPa): air pressure. The default value is at 1 atm, <em>i.e.</em> the mean sea-level</li></ul><p>atmospheric pressure on Earth.</p><ul><li><code>Precipitations = DEFAULTS.Precipitations</code> (mm): precipitations from atmosphere (<em>i.e.</em> rain, snow, hail, etc.)</li><li><code>Cₐ = DEFAULTS.Cₐ</code> (ppm): air CO₂ concentration</li><li><code>check = true</code>: whether to check the validity of the input values.</li><li><code>e = vapor_pressure(T,Rh)</code> (kPa): vapor pressure</li><li><code>eₛ = e_sat(T)</code> (kPa): saturated vapor pressure</li><li><code>VPD = eₛ - e</code> (kPa): vapor pressure deficit</li><li><code>ρ = air_density(T, P, constants.Rd, constants.K₀)</code> (kg m-3): air density</li><li><code>λ = latent_heat_vaporization(T, constants.λ₀)</code> (J kg-1): latent heat of vaporization</li><li><code>γ = psychrometer_constant(P, λ, constants.Cₚ, constants.ε)</code> (kPa K−1): psychrometer &quot;constant&quot;</li><li><code>ε = atmosphere_emissivity(T,e,constants.K₀)</code> (0-1): atmosphere emissivity</li><li><code>Δ = e_sat_slope(meteo.T)</code> (0-1): slope of the saturation vapor pressure at air temperature</li><li><code>clearness::A = Inf</code> (0-1): Sky clearness</li><li><code>Ri_SW_f::A = Inf</code> (W m-2): Incoming short wave radiation flux</li><li><code>Ri_PAR_f::A = Inf</code> (W m-2): Incoming PAR flux</li><li><code>Ri_NIR_f::A = Inf</code> (W m-2): Incoming NIR flux</li><li><code>Ri_TIR_f::A = Inf</code> (W m-2): Incoming TIR flux</li><li><code>Ri_custom_f::A = Inf</code> (W m-2): Incoming radiation flux for a custom waveband</li></ul><p><strong>Notes</strong></p><p>The structure can be built using only <code>T</code>, <code>Rh</code>, <code>Wind</code> and <code>P</code>. All other variables are optional and either let at their default value or automatically computed using the functions given in <code>Arguments</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">Atmosphere(T = 20.0, Wind = 1.0, P = 101.3, Rh = 0.65)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/atmosphere.jl#L8-L48">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.CalendarWindow"><a class="docstring-binding" href="#PlantMeteo.CalendarWindow"><code>PlantMeteo.CalendarWindow</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">CalendarWindow(period; anchor=:current_period, week_start=1, completeness=:allow_partial)</code></pre><p>Calendar-based window selector used by <a href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>sample_weather</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>period::Symbol</code>: grouping period.<ul><li><code>:day</code>: group by civil day.</li><li><code>:week</code>: group by civil week (start controlled by <code>week_start</code>).</li><li><code>:month</code>: group by calendar month.</li></ul></li><li><code>anchor::Symbol</code>: which period is sampled at weather step <code>i</code>.<ul><li><code>:current_period</code>: sample from the period containing <code>weather[i].date</code>.</li><li><code>:previous_complete_period</code>: sample from the period immediately before the current one.</li></ul></li><li><code>week_start::Int</code>: week start day in <code>1:7</code> (<code>1=Monday</code>, <code>7=Sunday</code>). Used only when <code>period == :week</code>.</li><li><code>completeness::Symbol</code>: behavior when selected period is missing/incomplete.<ul><li><code>:allow_partial</code>: accept partial periods; if no previous period exists, fallback to <code>[step]</code>.</li><li><code>:strict</code>: require a valid complete selected period (default); otherwise throw an error.</li></ul></li></ul><p><strong>Notes</strong></p><ul><li><code>CalendarWindow</code> requires <code>date::DateTime</code> in source weather rows.</li><li>Completeness is checked from summed <code>duration</code> against expected civil period duration.</li></ul><p><strong>Errors</strong></p><p>Throws if any argument is outside the allowed set.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L237-L265">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.Constants"><a class="docstring-binding" href="#PlantMeteo.Constants"><code>PlantMeteo.Constants</code></a> — <span class="docstring-category">Type</span></summary><section><div><p>Physical constants</p><p>The definition and default values are:</p><ul><li><code>K₀ = -273.15</code>: absolute zero (°C)</li><li><code>R = 8.314</code>: universal gas constant (<span>$J\ mol^{-1}\ K^{-1}$</span>).</li><li><code>Rd = 287.0586</code>: gas constant of dry air (<span>$J\ kg^{-1}\ K^{-1}$</span>).</li><li><code>Dₕ₀ = 21.5e-6</code>: molecular diffusivity for heat at base temperature, applied in the integrated form of the   Fick’s Law of diffusion (<span>$m^2\ s^{-1}$</span>). See eq. 3.10 from Monteith and Unsworth (2013).</li><li><code>Cₚ = 1013.0</code>: Specific heat of air at constant pressure (<span>$J\ K^{-1}\ kg^{-1}$</span>), also   known as efficiency of impaction of particles. See Allen et al. (1998), or Monteith and   Unsworth (2013). NB: bigleaf R package uses 1004.834 intead.</li><li><code>ε = 0.622</code>: ratio of molecular weights of water vapor and air. See Monteith and   Unsworth (2013).</li><li><code>λ₀ = 2.501</code>: latent heat of vaporization for water at 0 degree (<span>$J\ kg^{-1}$</span>).</li><li><code>σ = 5.670373e-08</code> <a href="https://en.wikipedia.org/wiki/Stefan%E2%80%93Boltzmann_law">Stefan-Boltzmann constant</a>   in (<span>$W\ m^{-2}\ K^{-4}$</span>).</li><li><code>Gbₕ_to_Gbₕ₂ₒ = 1.075</code>: conversion coefficient from conductance to heat to conductance to water   vapor.</li><li><code>Gsc_to_Gsw = 1.57</code>: conversion coefficient from stomatal conductance to CO₂ to conductance to water   vapor.</li><li><code>Gbc_to_Gbₕ = 1.32</code>: conversion coefficient from boundary layer conductance to CO₂ to heat.</li><li><code>Mₕ₂ₒ = 18.0e-3</code> (kg mol-1): Molar mass for water.</li><li><code>J_to_umol = 4.57</code>: Conversion factor from radiation in Joules m-2 s-1 (or W m-2) to μmol m-2 s-1.</li><li><code>PAR_fraction = 0.48</code>: Fraction of shortwave radiation that is photosynthetically active radiation (PAR).</li></ul><p><strong>References</strong></p><p>Allen, Richard G., Luis S. Pereira, Dirk Raes, et Martin J Fao Smith. 1998. « Crop evapotranspiration-Guidelines for computing crop water requirements-FAO Irrigation and drainage paper 56 » 300 (9): D05109.</p><p>Monteith, John, et Mike Unsworth. 2013. Principles of environmental physics: plants, animals, and the atmosphere. Academic Press.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/constants.jl#L1-L36">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.FirstReducer"><a class="docstring-binding" href="#PlantMeteo.FirstReducer"><code>PlantMeteo.FirstReducer</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">FirstReducer()</code></pre><p>Reducer returning first value in the window.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L49-L53">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.FirstReducer-Tuple{AbstractVector}"><a class="docstring-binding" href="#PlantMeteo.FirstReducer-Tuple{AbstractVector}"><code>PlantMeteo.FirstReducer</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">(FirstReducer())(vals)
(FirstReducer())(vals, durations)</code></pre><p>Return first sampled value.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector</code>: values to reduce.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: optional durations (ignored).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L152-L162">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.LastReducer"><a class="docstring-binding" href="#PlantMeteo.LastReducer"><code>PlantMeteo.LastReducer</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">LastReducer()</code></pre><p>Reducer returning last value in the window.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L56-L60">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.LastReducer-Tuple{AbstractVector}"><a class="docstring-binding" href="#PlantMeteo.LastReducer-Tuple{AbstractVector}"><code>PlantMeteo.LastReducer</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">(LastReducer())(vals)
(LastReducer())(vals, durations)</code></pre><p>Return last sampled value.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector</code>: values to reduce.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: optional durations (ignored).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L166-L176">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MaxReducer"><a class="docstring-binding" href="#PlantMeteo.MaxReducer"><code>PlantMeteo.MaxReducer</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MaxReducer()</code></pre><p>Maximum reducer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L42-L46">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MaxReducer-Tuple{AbstractVector{&lt;:Real}}"><a class="docstring-binding" href="#PlantMeteo.MaxReducer-Tuple{AbstractVector{&lt;:Real}}"><code>PlantMeteo.MaxReducer</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">(MaxReducer())(vals)
(MaxReducer())(vals, durations)</code></pre><p>Compute maximum of sampled values.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector{&lt;:Real}</code>: values to reduce.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: optional durations (ignored).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L138-L148">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MeanReducer"><a class="docstring-binding" href="#PlantMeteo.MeanReducer"><code>PlantMeteo.MeanReducer</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MeanReducer()</code></pre><p>Arithmetic mean reducer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L21-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MeanReducer-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><a class="docstring-binding" href="#PlantMeteo.MeanReducer-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><code>PlantMeteo.MeanReducer</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">(MeanReducer())(vals)
(MeanReducer())(vals, durations)</code></pre><p>Compute arithmetic mean of sampled values.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector{&lt;:Real}</code>: values to reduce.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: optional durations (ignored).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L97-L107">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MeanWeighted"><a class="docstring-binding" href="#PlantMeteo.MeanWeighted"><code>PlantMeteo.MeanWeighted</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MeanWeighted()</code></pre><p>Duration-weighted mean reducer. When durations are not provided, falls back to a plain mean.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L14-L18">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MeanWeighted-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><a class="docstring-binding" href="#PlantMeteo.MeanWeighted-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><code>PlantMeteo.MeanWeighted</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">(MeanWeighted())(vals, durations)</code></pre><p>Compute duration-weighted mean.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector{&lt;:Real}</code>: values to reduce.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: per-value durations.</li></ul><p><strong>Returns</strong></p><p>Weighted mean, or <code>nothing</code> when the total duration is zero.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L71-L84">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MeteoTransform"><a class="docstring-binding" href="#PlantMeteo.MeteoTransform"><code>PlantMeteo.MeteoTransform</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MeteoTransform(target; source=target, reducer=MeanWeighted())</code></pre><p>Build a transform rule consumed by <a href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>sample_weather</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>target::Symbol</code>: output variable name in sampled weather.</li><li><code>source::Symbol</code>: input variable name read from source rows.</li><li><code>reducer</code>: reducer instance used on windowed values.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L294-L304">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MinReducer"><a class="docstring-binding" href="#PlantMeteo.MinReducer"><code>PlantMeteo.MinReducer</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">MinReducer()</code></pre><p>Minimum reducer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L35-L39">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.MinReducer-Tuple{AbstractVector{&lt;:Real}}"><a class="docstring-binding" href="#PlantMeteo.MinReducer-Tuple{AbstractVector{&lt;:Real}}"><code>PlantMeteo.MinReducer</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">(MinReducer())(vals)
(MinReducer())(vals, durations)</code></pre><p>Compute minimum of sampled values.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector{&lt;:Real}</code>: values to reduce.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: optional durations (ignored).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L124-L134">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.OpenMeteo"><a class="docstring-binding" href="#PlantMeteo.OpenMeteo"><code>PlantMeteo.OpenMeteo</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">OpenMeteo()
OpenMeteo(
    vars=PlantMeteo.DEFAULT_OPENMETEO_HOURLY,
    forecast_server=&quot;https://api.open-meteo.com/v1/forecast&quot;,
    historical_server=&quot;https://archive-api.open-meteo.com/v1/era5&quot;,
    units=OpenMeteoUnits(),
    timezone=&quot;UTC&quot;,
    models=[&quot;auto&quot;]
)</code></pre><p>A type that defines the <a href="https://open-meteo.com/">open-meteo.com</a> API.  No need of an API key as it is free. Please keep in mind that the API is distributed under the AGPL license, that it is not free for commercial use, and that you should use it responsibly.</p><p><strong>Notes</strong></p><p>The API wrapper provided by PlantMeteo is only working for the hourly data as daily data is missing  some variables. The API wrapper is also not working for the &quot;soil&quot; variables as they are not consistant between forecast and historical data.</p><p><strong>See also</strong></p><p><a href="#PlantMeteo.to_daily-Tuple{Any, Vararg{Any}}"><code>to_daily</code></a></p><p><strong>Arguments</strong></p><ul><li><code>vars</code>: the variables needed, see <a href="https://open-meteo.com/en/docs">here</a>.</li><li><code>forecast_server</code>: the server to use for the forecast, see </li></ul><p><a href="https://open-meteo.com/en/docs">here</a>. Default to <code>https://api.open-meteo.com/v1/forecast</code>.</p><ul><li><code>historical_server</code>: the server to use for the historical data, see </li></ul><p><a href="https://open-meteo.com/en/docs">here</a>. Default to <code>https://archive-api.open-meteo.com/v1/era5</code>.</p><ul><li><code>start_archive::Dates.Day</code>: the first day on which we have to get data from the historical archive instead of the forecast server, </li></ul><p>data is at 25km resolution in the archive. Default to -150 days.</p><ul><li><code>units::OpenMeteoUnits</code>: the units used for the variables, see <a href="#PlantMeteo.OpenMeteoUnits"><code>OpenMeteoUnits</code></a>.</li><li><code>timezone</code>: the timezone used for the data, see <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">the list here</a>. </li></ul><p>Default to &quot;UTC&quot;. This parameter is not checked, so be careful when using it.</p><ul><li><code>models</code>: the models to use for the forecast. Default to <code>&quot;[&quot;best_match&quot;]&quot;</code>. See <a href="#PlantMeteo.OPENMETEO_MODELS"><code>OPENMETEO_MODELS</code></a> for more details.</li></ul><p><strong>Troubleshooting</strong></p><p>If you get an error when calling the API, try to decrease the value of <code>start_archive</code> to <em>e.g.</em>. 100 days before  today (<code>-Dates.Day(100)</code>).</p><p><strong>Details</strong></p><p>The default variables are: &quot;temperature<em>2m&quot;, &quot;relativehumidity</em>2m&quot;, &quot;precipitation&quot;, &quot;surface<em>pressure&quot;, &quot;windspeed</em>10m&quot;, &quot;shortwave<em>radiation&quot;, &quot;direct</em>radiation&quot;, &quot;diffuse_radiation&quot;.</p><p>Note that we don&#39;t download: &quot;soil<em>temperature</em>0cm&quot;, &quot;soil<em>temperature</em>6cm&quot;, &quot;soil<em>temperature</em>18cm&quot;, &quot;soil<em>temperature</em>54cm&quot;, &quot;soil<em>moisture</em>0<em>1cm&quot;, &quot;soil</em>moisture<em>1</em>3cm&quot;, &quot;soil<em>moisture</em>3<em>9cm&quot;, &quot;soil</em>moisture<em>9</em>27cm&quot; and &quot;soil<em>moisture</em>27_81cm&quot;  by default as they are not consistant between forecast and hystorical data.</p><p><strong>Sources</strong></p><ul><li><a href="https://open-meteo.com/">Open-Meteo.com</a>, under Attribution </li></ul><p>4.0 International (CC BY 4.0).</p><ul><li>Copernicus Climate Change Service information 2022 (Hersbach et al., 2018).</li></ul><p>Hersbach, H., Bell, B., Berrisford, P., Biavati, G., Horányi, A., Muñoz Sabater, J., Nicolas, J.,  Peubey, C., Radu, R., Rozum, I., Schepers, D., Simmons, A., Soci, C., Dee, D., Thépaut, J-N. (2018):  ERA5 hourly data on single levels from 1959 to present.  Copernicus Climate Change Service (C3S) Climate Data Store (CDS). (Updated daily), 10.24381/cds.adbb2d47</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/open-meteo.jl#L41-L105">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.OpenMeteoUnits"><a class="docstring-binding" href="#PlantMeteo.OpenMeteoUnits"><code>PlantMeteo.OpenMeteoUnits</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">OpenMeteoUnits(temperature_unit, windspeed_unit, precipitation_unit)
OpenMeteoUnits(;temperature_unit=&quot;celsius&quot;, windspeed_unit=&quot;ms&quot;, precipitation_unit=&quot;mm&quot;)</code></pre><p>A type that defines the units used for the variabels when calling the <a href="https://open-meteo.com/">open-meteo.com</a> API.</p><p><strong>Arguments</strong></p><ul><li><code>temperature_unit</code>: the temperature unit, can be &quot;celsius&quot; or &quot;fahrenheit&quot;. Default to &quot;celsius&quot;.</li><li><code>windspeed_unit</code>: the windspeed unit, can be &quot;ms&quot;, &quot;kmh&quot;, &quot;mph&quot;, or &quot;kn&quot;. Default to &quot;ms&quot;.</li><li><code>precipitation_unit</code>: the precipitation unit, can be &quot;mm&quot; or &quot;inch&quot;. Default to &quot;mm&quot;.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; units = OpenMeteoUnits(&quot;celsius&quot;, &quot;ms&quot;, &quot;mm&quot;)
OpenMeteoUnits(&quot;celsius&quot;, &quot;ms&quot;, &quot;mm&quot;)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/open-meteo.jl#L1-L19">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.PreparedWeather"><a class="docstring-binding" href="#PlantMeteo.PreparedWeather"><code>PlantMeteo.PreparedWeather</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">PreparedWeather(weather; transforms=default_sampling_transforms(), lazy=true)</code></pre><p>Build a sampler container used by <a href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>sample_weather</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>weather</code>: source weather table (<code>TimeStepTable{Atmosphere}</code> or compatible rows).</li><li><code>transforms</code>: transform specification accepted by <a href="#PlantMeteo.normalize_sampling_transforms-Tuple{AbstractVector{MeteoTransform}}"><code>normalize_sampling_transforms</code></a>.</li><li><code>lazy::Bool</code>: enable memoization cache for repeated sampling queries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L313-L323">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.RadiationEnergy"><a class="docstring-binding" href="#PlantMeteo.RadiationEnergy"><code>PlantMeteo.RadiationEnergy</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RadiationEnergy()</code></pre><p>Integrate flux values (W m-2) over durations (seconds) into MJ m-2.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L63-L67">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.RadiationEnergy-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><a class="docstring-binding" href="#PlantMeteo.RadiationEnergy-Tuple{AbstractVector{&lt;:Real}, AbstractVector{&lt;:Real}}"><code>PlantMeteo.RadiationEnergy</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">RadiationEnergy()(vals, durations)</code></pre><p>Integrate flux values over durations into energy in MJ m-2.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector{&lt;:Real}</code>: flux values in W m-2.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: durations in seconds or in <code>Dates.TimePeriod</code> (<em>e.g.</em> <code>Dates.Day</code>, <code>Dates.Minute</code>...).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L180-L189">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.RadiationEnergy-Tuple{AbstractVector{&lt;:Real}}"><a class="docstring-binding" href="#PlantMeteo.RadiationEnergy-Tuple{AbstractVector{&lt;:Real}}"><code>PlantMeteo.RadiationEnergy</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">(RadiationEnergy())(vals)</code></pre><p>Erroring fallback for duration-free reductions.</p><p>Use <code>(RadiationEnergy())(vals, durations)</code> in weather sampling contexts.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L199-L205">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.RollingWindow"><a class="docstring-binding" href="#PlantMeteo.RollingWindow"><code>PlantMeteo.RollingWindow</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">RollingWindow(dt=1.0)</code></pre><p>Trailing window selector for <a href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>sample_weather</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>dt::Real</code>: trailing window length in source weather timesteps.</li></ul><p><strong>Notes</strong></p><ul><li><code>RollingWindow()</code> is equivalent to <code>RollingWindow(1.0)</code> (identity window).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L217-L229">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.SumReducer"><a class="docstring-binding" href="#PlantMeteo.SumReducer"><code>PlantMeteo.SumReducer</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">SumReducer()</code></pre><p>Sum reducer.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L28-L32">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.SumReducer-Tuple{AbstractVector{&lt;:Real}}"><a class="docstring-binding" href="#PlantMeteo.SumReducer-Tuple{AbstractVector{&lt;:Real}}"><code>PlantMeteo.SumReducer</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">(SumReducer())(vals)
(SumReducer())(vals, durations)</code></pre><p>Compute sum of sampled values.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector{&lt;:Real}</code>: values to reduce.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: optional durations (ignored).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L110-L120">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.TimeStepTable"><a class="docstring-binding" href="#PlantMeteo.TimeStepTable"><code>PlantMeteo.TimeStepTable</code></a> — <span class="docstring-category">Type</span></summary><section><div><pre><code class="language-julia hljs">TimeStepTable(vars)</code></pre><p><code>TimeStepTable</code> stores variables values for each time step, <em>e.g.</em> weather variables. It implements the <code>Tables.jl</code> interface, so it can be used with any package that uses  <code>Tables.jl</code> (like <code>DataFrames.jl</code>).</p><p>You can extend <code>TimeStepTable</code> to store your own variables by defining a new type for the  storage of the variables. You can look at the <a href="#PlantMeteo.Atmosphere"><code>Atmosphere</code></a> type  for an example implementation, or the <code>Status</code> type from  <a href="https://github.com/VEZY/PlantSimEngine.jl"><code>PlantSimEngine.jl</code></a>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">data = TimeStepTable(
    [
        Atmosphere(T = 20.0, Wind = 1.0, P = 101.3, Rh = 0.65),
        Atmosphere(T = 23.0, Wind = 1.5, P = 101.3, Rh = 0.60),
        Atmosphere(T = 25.0, Wind = 3.0, P = 101.3, Rh = 0.55)
    ]
)

# We can convert it into a DataFrame:
using DataFrames
df = DataFrame(data)

# We can also create a TimeStepTable from a DataFrame:
TimeStepTable(df)

# Note that by default it will use NamedTuple to store the variables
# for high performance. If you want to use a different type, you can
# specify it as a type parameter (if you want *e.g.* mutability or pre-computations):
TimeStepTable{Atmosphere}(df)
# Or if you use PlantSimEngine: TimeStepTable{Status}(df)

# Indexing examples:
data[:T]      # full column by Symbol
data[&quot;T&quot;]     # full column by String
data[1]       # one row
data[1:2]     # row subset as TimeStepTable
data[1, :]    # one row (matrix-like syntax)
data[1, :T]   # one cell by row + Symbol column
data[1, &quot;T&quot;]  # one cell by row + String column
data[1:2, :T] # vector slice from one column
data[1:2, &quot;T&quot;]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L1-L48">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Base.setindex!-Tuple{PlantMeteo.TimeStepRow, Any, Any}"><a class="docstring-binding" href="#Base.setindex!-Tuple{PlantMeteo.TimeStepRow, Any, Any}"><code>Base.setindex!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">setindex!(row::TimeStepRow, nm::Symbol)
setindex!(row::TimeStepRow, i::Int)</code></pre><p>Set the value of a variable in a <code>TimeStepRow</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L303-L308">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.Weather-Union{Tuple{Any}, Tuple{S}, Tuple{Any, S}} where S&lt;:NamedTuple"><a class="docstring-binding" href="#PlantMeteo.Weather-Union{Tuple{Any}, Tuple{S}, Tuple{Any, S}} where S&lt;:NamedTuple"><code>PlantMeteo.Weather</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Weather(data[, metadata])</code></pre><p>Defines the weather, <em>i.e.</em> the local conditions of the Atmosphere for one or more time-steps. Each time-step is described using the <a href="#PlantMeteo.Atmosphere"><code>Atmosphere</code></a> structure, and the resulting structure is a <code>TimeStepTable</code>.</p><p>The simplest way to instantiate a <code>Weather</code> is to use a <code>DataFrame</code> as input.</p><p>The <code>DataFrame</code> should be formated such as each row is an observation for a given time-step and each column is a variable. The column names should match exactly the variables names of the <a href="#PlantMeteo.Atmosphere"><code>Atmosphere</code></a> structure:</p><p><strong>See also</strong></p><ul><li>the <a href="#PlantMeteo.Atmosphere"><code>Atmosphere</code></a> structure</li><li>the <a href="#PlantMeteo.read_weather-Tuple{Any, Vararg{Any}}"><code>read_weather</code></a> function to read Archimed-formatted meteorology data.</li></ul><p><strong>Examples</strong></p><p>Example of weather data defined by hand (cumbersome):</p><pre><code class="language-julia hljs">w = Weather(
    [
        Atmosphere(T = 20.0, Wind = 1.0, P = 101.3, Rh = 0.65),
        Atmosphere(T = 23.0, Wind = 1.5, P = 101.3, Rh = 0.60),
        Atmosphere(T = 25.0, Wind = 3.0, P = 101.3, Rh = 0.55)
    ],
    (
        site = &quot;Test site&quot;,
        important_metadata = &quot;this is important and will be attached to our weather data&quot;
    )
)</code></pre><p><code>Weather</code> is a <code>TimeStepTable{Atmosphere}</code>, so we can convert it into a <code>DataFrame</code>:</p><pre><code class="language-julia hljs">using DataFrames
df = DataFrame(w)</code></pre><p>And then back into <code>Weather</code> to make a <code>TimeStepTable{Atmosphere}</code>:</p><pre><code class="language-julia hljs">Weather(df, (site = &quot;My site&quot;,))</code></pre><p>Of course it works with any <code>DataFrame</code> that has at least the required variables listed in <code>Atmosphere</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/weather.jl#L1-L52">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._build_calendar_window_cache-Tuple{PreparedWeather, CalendarWindow}"><a class="docstring-binding" href="#PlantMeteo._build_calendar_window_cache-Tuple{PreparedWeather, CalendarWindow}"><code>PlantMeteo._build_calendar_window_cache</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_build_calendar_window_cache(prepared, window)</code></pre><p>Precompute per-step indices and completeness flags for <a href="#PlantMeteo.CalendarWindow"><code>CalendarWindow</code></a> sampling.</p><p><strong>Arguments</strong></p><ul><li><code>prepared::PreparedWeather</code>: source weather container.</li><li><code>window::CalendarWindow</code>: calendar window settings.</li></ul><p><strong>Returns</strong></p><p>Named tuple with:</p><ul><li><code>indices_by_step::Vector{Vector{Int}}</code></li><li><code>complete_by_step::Vector{Bool}</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L468-L483">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._default_radiation_flux_vars-Tuple{}"><a class="docstring-binding" href="#PlantMeteo._default_radiation_flux_vars-Tuple{}"><code>PlantMeteo._default_radiation_flux_vars</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_default_radiation_flux_vars()</code></pre><p>Return default radiation source variable names used by <a href="#PlantMeteo.default_sampling_transforms-Tuple{}"><code>default_sampling_transforms</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L603-L607">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._duration_period_from_seconds-Tuple{Float64}"><a class="docstring-binding" href="#PlantMeteo._duration_period_from_seconds-Tuple{Float64}"><code>PlantMeteo._duration_period_from_seconds</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_duration_period_from_seconds(sec)</code></pre><p>Convert seconds to a <code>Dates.Millisecond</code> period used in sampled outputs.</p><p><strong>Arguments</strong></p><ul><li><code>sec::Float64</code>: duration in seconds.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L379-L387">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._duration_seconds-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo._duration_seconds-Tuple{Any}"><code>PlantMeteo._duration_seconds</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_duration_seconds(d)</code></pre><p>Convert a duration-like value to seconds.</p><p><strong>Arguments</strong></p><ul><li><code>d</code>: a <code>Dates.Period</code>, a real value already in seconds, or another value.</li></ul><p><strong>Returns</strong></p><p><code>Float64</code> seconds. Unknown types fall back to <code>1.0</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L357-L369">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._expected_period_seconds-Tuple{Date, CalendarWindow}"><a class="docstring-binding" href="#PlantMeteo._expected_period_seconds-Tuple{Date, CalendarWindow}"><code>PlantMeteo._expected_period_seconds</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_expected_period_seconds(period_key, window)</code></pre><p>Return expected duration in seconds for a complete calendar period.</p><p><strong>Arguments</strong></p><ul><li><code>period_key::Dates.Date</code>: canonical period key from <code>_period_key</code>.</li><li><code>window::CalendarWindow</code>: window configuration.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L447-L456">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._normalize_reducer-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo._normalize_reducer-Tuple{Any}"><code>PlantMeteo._normalize_reducer</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_normalize_reducer(reducer)</code></pre><p>Normalize user reducer definitions into a callable reducer object.</p><p><strong>Arguments</strong></p><ul><li><code>reducer</code>: reducer instance/type or callable.</li></ul><p><strong>Returns</strong></p><ul><li>Reducer instance when input is a reducer type.</li><li>Reducer/callable unchanged when already instantiated.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L681-L694">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._normalize_single_transform-Tuple{Symbol, Any}"><a class="docstring-binding" href="#PlantMeteo._normalize_single_transform-Tuple{Symbol, Any}"><code>PlantMeteo._normalize_single_transform</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_normalize_single_transform(target, rule)</code></pre><p>Normalize one transform specification entry into a <a href="#PlantMeteo.MeteoTransform"><code>MeteoTransform</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>target::Symbol</code>: output variable name.</li><li><code>rule</code>: reducer-like value or named tuple with optional <code>source</code> and <code>reducer</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L714-L723">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._period_key-Tuple{DateTime, CalendarWindow}"><a class="docstring-binding" href="#PlantMeteo._period_key-Tuple{DateTime, CalendarWindow}"><code>PlantMeteo._period_key</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_period_key(dt, window)</code></pre><p>Map a <code>DateTime</code> to the canonical period key used by <a href="#PlantMeteo.CalendarWindow"><code>CalendarWindow</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>dt::Dates.DateTime</code>: timestamp to classify.</li><li><code>window::CalendarWindow</code>: window configuration (day/week/month).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L425-L434">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._reduce_values-Tuple{AbstractVector, AbstractVector{&lt;:Real}, Any}"><a class="docstring-binding" href="#PlantMeteo._reduce_values-Tuple{AbstractVector, AbstractVector{&lt;:Real}, Any}"><code>PlantMeteo._reduce_values</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_reduce_values(vals, durations, reducer)</code></pre><p>Apply one reducer to sampled values and optional durations.</p><p><strong>Arguments</strong></p><ul><li><code>vals::AbstractVector</code>: sampled source values for one transform.</li><li><code>durations::AbstractVector{&lt;:Real}</code>: per-value durations in seconds.</li><li><code>reducer</code>: normalized reducer instance or callable.</li></ul><p><strong>Returns</strong></p><p>Reduced value, or <code>nothing</code> when reduction is not possible (for example non-real values with real-only reducers).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L781-L796">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._sample_weather_uncached-Tuple{PreparedWeather, Int64, AbstractSamplingWindow, AbstractVector{MeteoTransform}}"><a class="docstring-binding" href="#PlantMeteo._sample_weather_uncached-Tuple{PreparedWeather, Int64, AbstractSamplingWindow, AbstractVector{MeteoTransform}}"><code>PlantMeteo._sample_weather_uncached</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_sample_weather_uncached(prepared, step, window, transforms)</code></pre><p>Compute one sampled weather row without using/setting cache.</p><p><strong>Arguments</strong></p><ul><li><code>prepared::PreparedWeather</code>: source weather container.</li><li><code>step::Int</code>: index of the current source weather row.</li><li><code>window::AbstractSamplingWindow</code>: window selection strategy.</li><li><code>transforms::AbstractVector{MeteoTransform}</code>: normalized transform rules.</li></ul><p><strong>Returns</strong></p><p><code>Atmosphere</code> sampled at <code>step</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L821-L836">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._transform_signature-Tuple{AbstractVector{MeteoTransform}}"><a class="docstring-binding" href="#PlantMeteo._transform_signature-Tuple{AbstractVector{MeteoTransform}}"><code>PlantMeteo._transform_signature</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_transform_signature(transforms)</code></pre><p>Compute a deterministic hash signature for transform rules used in cache keys.</p><p><strong>Arguments</strong></p><ul><li><code>transforms::AbstractVector{MeteoTransform}</code>: normalized transform rules.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L586-L594">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._week_start_date-Tuple{Date, Int64}"><a class="docstring-binding" href="#PlantMeteo._week_start_date-Tuple{Date, Int64}"><code>PlantMeteo._week_start_date</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_week_start_date(d, week_start)</code></pre><p>Return the civil week start date containing <code>d</code>.</p><p><strong>Arguments</strong></p><ul><li><code>d::Dates.Date</code>: date to classify.</li><li><code>week_start::Int</code>: week start day in <code>1:7</code> (<code>1=Monday</code>, <code>7=Sunday</code>).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L410-L419">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._window_bounds-Tuple{Int64, RollingWindow}"><a class="docstring-binding" href="#PlantMeteo._window_bounds-Tuple{Int64, RollingWindow}"><code>PlantMeteo._window_bounds</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_window_bounds(step, window)</code></pre><p>Compute inclusive trailing bounds <code>(start, stop)</code> for a <a href="#PlantMeteo.RollingWindow"><code>RollingWindow</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>step::Int</code>: current weather index.</li><li><code>window::RollingWindow</code>: rolling window configuration.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L393-L402">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo._window_indices-Tuple{PreparedWeather, Int64, AbstractSamplingWindow}"><a class="docstring-binding" href="#PlantMeteo._window_indices-Tuple{PreparedWeather, Int64, AbstractSamplingWindow}"><code>PlantMeteo._window_indices</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">_window_indices(prepared, step, window)</code></pre><p>Return source weather indices selected for one sampling query.</p><p><strong>Arguments</strong></p><ul><li><code>prepared::PreparedWeather</code>: source weather container.</li><li><code>step::Int</code>: current weather index.</li><li><code>window::AbstractSamplingWindow</code>: window selection strategy.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L541-L551">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.add_transformations!-NTuple{4, Any}"><a class="docstring-binding" href="#PlantMeteo.add_transformations!-NTuple{4, Any}"><code>PlantMeteo.add_transformations!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">add_transformations!(df, trans, vars, fun; error_missing=false)</code></pre><p>Add the <code>fun</code> transformations to the <code>trans</code> vector for the  variables <code>vars</code> found in the <code>df</code> DataFrame.</p><p><strong>Arguments</strong></p><ul><li><code>df</code>: the DataFrame</li><li><code>trans</code>: the vector of transformations (will be modified in-place)</li><li><code>vars</code>: the variables to transform (can be a symbol, a vector of symbols or a pairs :var =&gt; :new_var)</li><li><code>fun</code>: the function to apply to the variables</li><li><code>error_missing=true</code>: if <code>true</code>, the function returns an error if the variable is not found. If <code>false</code>, </li></ul><p>the variable is not added to <code>trans</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/to_daily.jl#L238-L252">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.air_density-NTuple{4, Any}"><a class="docstring-binding" href="#PlantMeteo.air_density-NTuple{4, Any}"><code>PlantMeteo.air_density</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">air_density(Tₐ, P; check=true)
air_density(Tₐ, P, Rd, K₀; check=true)</code></pre><p>ρ, the air density (kg m-3).</p><p><strong>Arguments</strong></p><ul><li><code>Tₐ</code> (Celsius degree): air temperature</li><li><code>P</code> (kPa): air pressure</li><li><code>Rd</code> (J kg-1 K-1): gas constant of dry air (see Foken p. 245, or R bigleaf package).</li><li><code>K₀</code> (Celsius degree): temperature in Celsius degree at 0 Kelvin</li><li><code>check</code> (Bool): check if P is in the 85-110 kPa earth range</li></ul><p><strong>Note</strong></p><p>Rd and K₀ are Taken from <a href="#PlantMeteo.Constants"><code>Constants</code></a> if not provided.</p><p><strong>References</strong></p><p>Foken, T, 2008: Micrometeorology. Springer, Berlin, Germany.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/variables_computations.jl#L44-L65">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.atmosphere_emissivity-Tuple{Any, Any, Any}"><a class="docstring-binding" href="#PlantMeteo.atmosphere_emissivity-Tuple{Any, Any, Any}"><code>PlantMeteo.atmosphere_emissivity</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">atmosphere_emissivity(Tₐ,eₐ)</code></pre><p>Emissivity of the atmoshpere at a given temperature and vapor pressure.</p><p><strong>Arguments</strong></p><ul><li><code>Tₐ</code> (°C): air temperature</li><li><code>eₐ</code> (kPa): air vapor pressure</li><li><code>K₀</code> (°C): absolute zero</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">Tₐ = 20.0
VPD = 1.5
atmosphere_emissivity(Tₐ, vapor_pressure(Tₐ,VPD))</code></pre><p><strong>References</strong></p><p>Leuning, R., F. M. Kelliher, DGG de Pury, et E.-D. SCHULZE. 1995. Leaf nitrogen, photosynthesis, conductance and transpiration: scaling from leaves to canopies ». Plant, Cell &amp; Environment 18 (10): 1183‑1200.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/emissivity.jl#L1-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.check_day_complete-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo.check_day_complete-Tuple{Any}"><code>PlantMeteo.check_day_complete</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">check_day_complete(df)</code></pre><p>Check that the weather table <code>df</code> has full days (24h) of data by  summing their durations.</p><p><code>df</code> must be a <code>Tables.jl</code> compatible table with a <code>date</code> and <code>duration</code> column. The <code>date</code> column must be a <code>Dates.DateTime</code> column, and the <code>duration</code> column  must be a <code>Dates.Period</code> or <code>Dates.CompoundPeriod</code> column.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/checks/check_day_complete.jl#L1-L10">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.compute_date"><a class="docstring-binding" href="#PlantMeteo.compute_date"><code>PlantMeteo.compute_date</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">compute_date(data, date_format, hour_format)</code></pre><p>Compute the <code>date</code> column depending on several cases:</p><ul><li>If it is already in data and is a <code>DateTime</code>, does nothing.</li><li>If it is a <code>String</code>, tries and parse it using a user-input <code>DateFormat</code></li><li>If it is a <code>Date</code>, return it as is, or try to make it a <code>DateTime</code> if there&#39;s a column named</li></ul><p><code>hour_start</code></p><p><strong>Arguments</strong></p><ul><li><code>data</code>: any <code>Tables.jl</code> compatible table, such as a <code>DataFrame</code></li><li><code>date_format</code>: a <code>DateFormat</code> to parse the <code>date</code> column if it is a <code>String</code></li><li><code>hour_format</code>: a <code>DateFormat</code> to parse the <code>hour_start</code> column if it is a <code>String</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/read_weather.jl#L122-L137">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.compute_duration"><a class="docstring-binding" href="#PlantMeteo.compute_duration"><code>PlantMeteo.compute_duration</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">compute_duration(data, hour_format, duration)</code></pre><p>Compute the <code>duration</code> column depending on several cases:</p><ul><li>If it is already in the data, use the <code>duration</code> function to parse it into a <code>Date.Period</code>.</li><li>If it is not, but there&#39;s a column named <code>hour_end</code> and another one either called <code>hour_start</code></li></ul><p>or <code>date</code>, compute the duration from the period between <code>hour_start</code> (or <code>date</code>) and <code>hour_end</code>.</p><p><strong>Arguments</strong></p><ul><li><code>data</code>: any <code>Tables.jl</code> compatible table, such as a <code>DataFrame</code></li><li><code>hour_format</code>: a <code>DateFormat</code> to parse the <code>hour_start</code> and <code>hour_end</code> columns if they are <code>String</code>s.</li><li><code>duration</code>: a function to parse the <code>duration</code> column. Usually <code>Dates.Day</code> or <code>Dates.Minute</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/read_weather.jl#L186-L200">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.default_sampling_transforms-Tuple{}"><a class="docstring-binding" href="#PlantMeteo.default_sampling_transforms-Tuple{}"><code>PlantMeteo.default_sampling_transforms</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">default_sampling_transforms(; radiation_mode=:both)</code></pre><p>Default weather sampling rules.</p><p><code>radiation_mode</code> controls how radiation targets are emitted:</p><ul><li><code>:flux_mean</code>: duration-weighted mean flux (same units as source)</li><li><code>:energy_sum</code>: integrated quantity in MJ m-2 over the sampling window</li><li><code>:both</code>: keep <code>Ri_*_f</code> as weighted-mean flux and also emit <code>Ri_*_q</code> quantities</li></ul><p><strong>Arguments</strong></p><ul><li><code>radiation_mode::Symbol</code>: one of <code>:flux_mean</code>, <code>:energy_sum</code>, <code>:both</code>.</li></ul><p><strong>Returns</strong></p><p><code>Vector{MeteoTransform}</code> used by <a href="#PlantMeteo.PreparedWeather"><code>PreparedWeather</code></a> and <a href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>sample_weather</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L618-L635">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.default_transformation-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo.default_transformation-Tuple{Any}"><code>PlantMeteo.default_transformation</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">default_transformation(df)</code></pre><p>Return the default transformations to apply to the <code>df</code> <code>DataFrame</code>  for the <code>to_daily</code> function. If the variable is not available, the transformation is not applied.</p><p>The default transformations are:</p><ul><li><code>:date =&gt; (x -&gt; unique(Dates.Date.(x))) =&gt; :date</code>: the date is transformed into a <code>Date</code> object</li><li><code>:duration =&gt; sum =&gt; :duration</code>: the duration is summed</li><li><code>:T =&gt; minimum =&gt; :Tmin</code>: we use the minimum temperature for Tmin</li><li><code>:T =&gt; maximum =&gt; :Tmax</code>: and the maximum temperature for Tmax</li><li><code>:T =&gt; mean =&gt; :T</code>: and the average daily temperature (!= than average of Tmin and Tmax)</li><li><code>:Precipitations =&gt; sum =&gt; :Precipitations</code>: the precipitations are summed</li><li><code>:Rh =&gt; mean =&gt; :Rh</code>: the relative humidity is averaged</li><li><code>:Wind, :P, :Rh, :Cₐ, :e, :eₛ, :VPD, :ρ, :λ, :γ, :ε, :Δ, :clearness</code> are </li></ul><p>all averaged</p><ul><li><code>[:Ri_SW_f, :duration] =&gt; ((x, y) -&gt; sum(x .* Dates.toms.(y)) * 1.0e-9) =&gt; :Ri_SW_f</code>: the irradiance is integrated, so its unit changes from W m⁻² to MJ m⁻² d⁻¹</li><li>All other irradiance variables are also integrated (see the code for details)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/to_daily.jl#L163-L182">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.e_sat-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo.e_sat-Tuple{Any}"><code>PlantMeteo.e_sat</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">e_sat(T)</code></pre><p>Saturated water vapour pressure (es, in kPa) at given temperature <code>T</code> (°C). See Jones (1992) p. 110 for the equation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/variables_computations.jl#L24-L29">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.e_sat_slope-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo.e_sat_slope-Tuple{Any}"><code>PlantMeteo.e_sat_slope</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">e_sat_slope(T)</code></pre><p>Slope of the vapor pressure saturation curve at a given temperature <code>T</code> (°C).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/variables_computations.jl#L34-L38">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.fetch_openmeteo-Union{Tuple{T}, Tuple{Any, Any, Any, Any, Any, T}} where T&lt;:OpenMeteo"><a class="docstring-binding" href="#PlantMeteo.fetch_openmeteo-Union{Tuple{T}, Tuple{Any, Any, Any, Any, Any, T}} where T&lt;:OpenMeteo"><code>PlantMeteo.fetch_openmeteo</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">fetch_openmeteo(url, lat, lon, start_date, end_date, params::OpenMeteo)</code></pre><p>Fetches the weather forecast from OpenMeteo.com and returns a tuple of: </p><ul><li>a vector of <a href="#PlantMeteo.Atmosphere"><code>Atmosphere</code></a></li><li>a <code>NamedTuple</code> of metadata (e.g. <code>elevation</code>, <code>timezone</code>, <code>units</code>...)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/open-meteo.jl#L230-L238">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.format_openmeteo!-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo.format_openmeteo!-Tuple{Any}"><code>PlantMeteo.format_openmeteo!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">format_openmeteo(data)</code></pre><p>Format the JSON file returned by the Open-Meteo API into a vector  of <a href="#PlantMeteo.Atmosphere"><code>Atmosphere</code></a>. The function also updates some units in <code>data</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/open-meteo.jl#L275-L280">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.get_forecast-Tuple{OpenMeteo, Any, Any, Any}"><a class="docstring-binding" href="#PlantMeteo.get_forecast-Tuple{OpenMeteo, Any, Any, Any}"><code>PlantMeteo.get_forecast</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_forecast(params::OpenMeteo, lat, lon, period; verbose=true)</code></pre><p>A function that returns the weather forecast from OpenMeteo.com</p><p><strong>Arguments</strong></p><ul><li><code>lat</code>: Latitude of the location</li><li><code>lon</code>: Longitude of the location</li><li><code>period::Union{StepRange{Date, Day}, Vector{Dates.Date}}</code>: Period of the forecast</li><li><code>verbose</code>: If <code>true</code>, print more information in case of errors or warnings.</li><li><code>kwargs</code>: Additional keyword arguments passed to <a href="#PlantMeteo.get_forecast-Tuple{OpenMeteo, Any, Any, Any}"><code>get_forecast</code></a> (not used in this method).</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PlantMeteo, Dates
lat = 48.8566
lon = 2.3522
period = [Dates.today(), Dates.today()+Dates.Day(3)]
params = OpenMeteo()
get_forecast(params, lat, lon, period)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/open-meteo.jl#L162-L185">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.get_index_raw-Tuple{TimeStepTable, Integer}"><a class="docstring-binding" href="#PlantMeteo.get_index_raw-Tuple{TimeStepTable, Integer}"><code>PlantMeteo.get_index_raw</code></a> — <span class="docstring-category">Method</span></summary><section><div><p>Get row from <code>TimeStepTable</code> in its raw format, <em>e.g.</em> as a <code>NamedTuple</code> or <code>Atmosphere</code> of values.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L395-L399">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.get_weather-Union{Tuple{P}, Tuple{Any, Any, P}} where P&lt;:Union{StepRange{Date, Day}, Vector{Date}}"><a class="docstring-binding" href="#PlantMeteo.get_weather-Union{Tuple{P}, Tuple{Any, Any, P}} where P&lt;:Union{StepRange{Date, Day}, Vector{Date}}"><code>PlantMeteo.get_weather</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">get_weather(lat, lon, period::Union{StepRange{Date, Day}, Vector{Dates.Date}}; api::DataType=OpenMeteo, sink=TimeStepTable, kwargs...)</code></pre><p>Returns the weather forecast for a given location and time using a weather API.</p><p><strong>Arguments</strong></p><ul><li><code>lat::Float64</code>: Latitude of the location in degrees</li><li><code>lon::Float64</code>: Longitude of the location in degrees</li><li><code>period::Union{StepRange{Date, Day}, Vector{Dates.Date}}</code>: Period of the forecast</li><li><code>api::DataType=OpenMeteo</code>: API to use for the forecast.</li><li><code>sink::DataType=TimeStepTable</code>: Type of the output. Default is <code>TimeStepTable</code>, but it</li></ul><p>can be any type that implements the <code>Tables.jl</code> interface, such as <code>DataFrames</code>.</p><ul><li><code>kwargs...</code>: Additional keyword arguments that are passed to the API</li></ul><p><strong>Details</strong></p><p>We can get all available APIs using <code>subtype(AbstractAPI)</code>. Please keep in mind that the default <a href="#PlantMeteo.OpenMeteo"><code>OpenMeteo</code></a> API is not free for commercial use, and that you should use it responsibly.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PlantMeteo, Dates
# Forecast for today and tomorrow:
period = [today(), today()+Dates.Day(1)]
w = get_weather(48.8566, 2.3522, period)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/generic_API.jl#L9-L38">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.latent_heat_vaporization-Tuple{Any, Any}"><a class="docstring-binding" href="#PlantMeteo.latent_heat_vaporization-Tuple{Any, Any}"><code>PlantMeteo.latent_heat_vaporization</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">latent_heat_vaporization(Tₐ,λ₀)
latent_heat_vaporization(Tₐ)</code></pre><p>λ, the latent heat of vaporization for water (J kg-1).</p><p><strong>Arguments</strong></p><ul><li><code>Tₐ</code> (°C): air temperature</li><li><code>λ₀</code>: latent heat of vaporization for water at 0 degree Celsius. Taken from <code>Constants().λ₀</code></li></ul><p>if not provided (see <a href="#PlantMeteo.Constants"><code>Constants</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/variables_computations.jl#L123-L135">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.materialize_weather-Tuple{PreparedWeather}"><a class="docstring-binding" href="#PlantMeteo.materialize_weather-Tuple{PreparedWeather}"><code>PlantMeteo.materialize_weather</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">materialize_weather(prepared; windows, transforms=nothing)</code></pre><p>Precompute sampled weather tables for a set of sampling windows. Returns <code>Dict{AbstractSamplingWindow,TimeStepTable{Atmosphere}}</code>.</p><p><strong>Arguments</strong></p><ul><li><code>prepared::PreparedWeather</code>: sampler state containing source weather.</li><li><code>windows</code>: iterable collection of <a href="#PlantMeteo.AbstractSamplingWindow"><code>AbstractSamplingWindow</code></a>.</li><li><code>transforms</code>: optional transform override applied to all windows.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L927-L938">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.new_names-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo.new_names-Tuple{Any}"><code>PlantMeteo.new_names</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">new_names(args)</code></pre><p>Get the new names of the columns after the transformation provided  by the user.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/to_daily.jl#L136-L141">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.next_row"><a class="docstring-binding" href="#PlantMeteo.next_row"><code>PlantMeteo.next_row</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">next_row(row::TimeStepRow, i=1)</code></pre><p>Return the next row in the table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L166-L170">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.next_value"><a class="docstring-binding" href="#PlantMeteo.next_value"><code>PlantMeteo.next_value</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">next_value(row::TimeStepRow, var, next_index=1; default=nothing)</code></pre><p>Return the value of <code>var</code> in the next row in the table, or <code>default</code> if there is no next row.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L178-L182">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.normalize_sampling_transforms-Tuple{AbstractVector{MeteoTransform}}"><a class="docstring-binding" href="#PlantMeteo.normalize_sampling_transforms-Tuple{AbstractVector{MeteoTransform}}"><code>PlantMeteo.normalize_sampling_transforms</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">normalize_sampling_transforms(transforms)</code></pre><p>Normalize user-provided weather transform definitions into <code>Vector{MeteoTransform}</code>.</p><p>Accepted inputs are:</p><ul><li><code>Vector{MeteoTransform}</code> (copied as-is)</li><li><code>NamedTuple</code> where each key is the target variable and each value is either:<ul><li>a reducer (<code>AbstractTimeReducer</code> instance/type, or callable), or</li><li>a named tuple with optional <code>source</code> and <code>reducer</code> fields</li></ul></li><li><code>AbstractVector</code> containing only <code>MeteoTransform</code> entries</li></ul><p>This is the canonical parser used by <a href="#PlantMeteo.PreparedWeather"><code>PreparedWeather</code></a> and <a href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>sample_weather</code></a> to validate and materialize transform rules.</p><p><strong>Arguments</strong></p><ul><li><code>transforms</code>: user transform specification (named tuple or vector forms).</li></ul><p><strong>Returns</strong></p><p><code>Vector{MeteoTransform}</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L734-L756">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.parse_hour"><a class="docstring-binding" href="#PlantMeteo.parse_hour"><code>PlantMeteo.parse_hour</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">parse_hour(h, hour_format=Dates.DateFormat(&quot;HH:MM:SS&quot;))</code></pre><p>Parse an hour that can be of several formats:</p><ul><li><code>Time</code>: return it as is</li><li><code>String</code>: try to parse it using the user-input <code>DateFormat</code></li><li><code>DateTime</code>: transform it into a <code>Time</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>h</code>: hour to parse</li><li><code>hour_format::DateFormat</code>: user-input format to parse the hours</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using PlantMeteo, Dates;</code></pre><p>As a string:</p><pre><code class="language-julia-repl hljs">julia&gt; PlantMeteo.parse_hour(&quot;12:00:00&quot;)
12:00:00</code></pre><p>As a <code>Time</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; PlantMeteo.parse_hour(Dates.Time(12, 0, 0))
12:00:00</code></pre><p>As a <code>DateTime</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; PlantMeteo.parse_hour(Dates.DateTime(2020, 1, 1, 12, 0, 0))
12:00:00</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/read_weather.jl#L247-L285">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.prepare_weather-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo.prepare_weather-Tuple{Any}"><code>PlantMeteo.prepare_weather</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">prepare_weather(
    w;
    vars=setdiff(propertynames(w), ATMOSPHERE_COMPUTED),
    duration=Dates.Minute
)</code></pre><p>Prepare the weather data for writing to a file. The function returns a  <code>DataFrame</code> with the selected variables and the duration formated.</p><p><strong>Arguments</strong></p><ul><li><code>w</code>: a <code>Tables.jl</code> interfaced table, such as a <code>TimeStepTable{Atmosphere}</code> or a <code>DataFrame</code></li><li><code>vars</code>: a vector of variables to write (as symbols). By default, all variables are written except the ones that</li></ul><p>can be recomputed (see <a href="#PlantMeteo.ATMOSPHERE_COMPUTED"><code>ATMOSPHERE_COMPUTED</code></a>). If <code>nothing</code> is given, all variables are written.</p><ul><li><code>duration</code>: the unit for formating the duration of the time steps. By default, it is <code>Dates.Minute</code></li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PlantMeteo, Dates

file = joinpath(dirname(dirname(pathof(PlantMeteo))),&quot;test&quot;,&quot;data&quot;,&quot;meteo.csv&quot;)
w = read_weather(
    file,
    :temperature =&gt; :T,
    :relativeHumidity =&gt; (x -&gt; x ./100) =&gt; :Rh,
    :wind =&gt; :Wind,
    :atmosphereCO2_ppm =&gt; :Cₐ,
    date_format = DateFormat(&quot;yyyy/mm/dd&quot;)
)

df = prepare_weather(w)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/write_weather.jl#L50-L84">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.prepare_weather_sampler-Tuple{Any}"><a class="docstring-binding" href="#PlantMeteo.prepare_weather_sampler-Tuple{Any}"><code>PlantMeteo.prepare_weather_sampler</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">prepare_weather_sampler(weather; transforms=default_sampling_transforms(), lazy=true)</code></pre><p>Build the <a href="#PlantMeteo.PreparedWeather"><code>PreparedWeather</code></a> container holding a fine-step weather table and lazy sampling cache.</p><p><strong>Arguments</strong></p><ul><li><code>weather</code>: source weather table.</li><li><code>transforms</code>: transform specification accepted by <a href="#PlantMeteo.normalize_sampling_transforms-Tuple{AbstractVector{MeteoTransform}}"><code>normalize_sampling_transforms</code></a>.</li><li><code>lazy::Bool</code>: enable/disable sampling cache.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L343-L353">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.prev_row"><a class="docstring-binding" href="#PlantMeteo.prev_row"><code>PlantMeteo.prev_row</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">prev_row(row::TimeStepRow, i=1)</code></pre><p>Return the previous row in the table, or <code>default</code> if there is no previous row.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L190-L194">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.prev_value"><a class="docstring-binding" href="#PlantMeteo.prev_value"><code>PlantMeteo.prev_value</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">prev_value(row::TimeStepRow, var, prev_index=1; default=nothing)</code></pre><p>Return the value of <code>var</code> in the previous row in the table, or <code>default</code> if there is no previous row.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L202-L206">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.psychrometer_constant-NTuple{4, Any}"><a class="docstring-binding" href="#PlantMeteo.psychrometer_constant-NTuple{4, Any}"><code>PlantMeteo.psychrometer_constant</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">psychrometer_constant(P, λ, Cₚ, ε; check=true)
psychrometer_constant(P, λ; check=true)</code></pre><p>γ, the psychrometer constant, also called psychrometric constant (kPa K−1). See Monteith and Unsworth (2013), p. 222.</p><p><strong>Arguments</strong></p><ul><li><code>P</code> (kPa): air pressure</li><li><code>λ</code> (<span>$J\ kg^{-1}$</span>): latent heat of vaporization for water (see <a href="#PlantMeteo.latent_heat_vaporization-Tuple{Any, Any}"><code>latent_heat_vaporization</code></a>)</li><li><code>Cₚ</code> (J kg-1 K-1): specific heat of air at constant pressure (<span>$J\ K^{-1}\ kg^{-1}$</span>)</li><li><code>ε</code> (Celsius degree): temperature in Celsius degree at 0 Kelvin</li><li><code>check</code> (Bool): check if P is in the 85-110 kPa earth range</li></ul><p><strong>Note</strong></p><p>Cₚ, ε and λ₀ are taken from <a href="#PlantMeteo.Constants"><code>Constants</code></a> if not provided.</p><pre><code class="language-julia hljs">Tₐ = 20.0

λ = latent_heat_vaporization(Tₐ, λ₀)
psychrometer_constant(100.0, λ)</code></pre><p><strong>References</strong></p><p>Monteith, John L., et Mike H. Unsworth. 2013. « Chapter 13 - Steady-State Heat Balance: (i) Water Surfaces, Soil, and Vegetation ». In Principles of Environmental Physics (Fourth Edition), edited by John L. Monteith et Mike H. Unsworth, 217‑47. Boston: Academic Press.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/variables_computations.jl#L76-L109">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.read_weather-Tuple{Any, Vararg{Any}}"><a class="docstring-binding" href="#PlantMeteo.read_weather-Tuple{Any, Vararg{Any}}"><code>PlantMeteo.read_weather</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">read_weather(
    file[,args...];
    date_format = DateFormat(&quot;yyyy-mm-ddTHH:MM:SS.s&quot;),
    hour_format = DateFormat(&quot;HH:MM:SS&quot;),
    duration=nothing
)</code></pre><p>Read a meteo file. The meteo file is a CSV, and optionnaly with metadata in a header formatted as a commented YAML. The column names <strong>and units</strong> should match exactly the fields of <a href="https://palmstudio.github.io/PlantMeteo.jl/stable/#PlantMeteo.Atmosphere"><code>Atmosphere</code></a>, or  the user should provide their transformation as arguments (<code>args</code>) with the <code>DataFrames.jl</code> form, <em>i.e.</em>: </p><ul><li><code>:var_name =&gt; (x -&gt; x .+ 1) =&gt; :new_name</code>: the variable <code>:var_name</code> is transformed by the function    <code>x -&gt; x .+ 1</code> and renamed to <code>:new_name</code></li><li><code>:var_name =&gt; :new_name</code>: the variable <code>:var_name</code> is renamed to <code>:new_name</code></li><li><code>:var_name</code>: the variable <code>:var_name</code> is kept as is</li></ul><p><strong>Note</strong></p><p>The variables found in the file will be used <em>as is</em> if not transformed, and not recomputed from the other variables. Please check that all variables have the same units as in the <a href="https://palmstudio.github.io/PlantMeteo.jl/stable/#PlantMeteo.Atmosphere"><code>Atmosphere</code></a> structure.</p><p><strong>Arguments</strong></p><ul><li><code>file::String</code>: path to a meteo file</li><li><code>args...</code>: A list of arguments to transform the table. See above to see the possible forms.</li><li><code>date_format = DateFormat(&quot;yyyy-mm-ddTHH:MM:SS.s&quot;)</code>: the format for the <code>DateTime</code> columns</li><li><code>hour_format = DateFormat(&quot;HH:MM:SS&quot;)</code>: the format for the <code>Time</code> columns (<em>e.g.</em> <code>hour_start</code>)</li><li><code>duration</code>: a function to parse the <code>duration</code> column if present in the file. Usually <code>Dates.Day</code> or <code>Dates.Minute</code>.</li></ul><p>If the column is absent, the duration will be computed using the <code>hour_format</code> and the <code>hour_start</code> and <code>hour_end</code> columns along with the <code>date</code> column.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PlantMeteo, Dates

file = joinpath(dirname(dirname(pathof(PlantMeteo))),&quot;test&quot;,&quot;data&quot;,&quot;meteo.csv&quot;)

meteo = read_weather(
    file,
    :temperature =&gt; :T,
    :relativeHumidity =&gt; (x -&gt; x ./100) =&gt; :Rh,
    :wind =&gt; :Wind,
    :atmosphereCO2_ppm =&gt; :Cₐ,
    date_format = DateFormat(&quot;yyyy/mm/dd&quot;)
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/read_weather.jl#L1-L50">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.rh_from_e-Tuple{Any, Any}"><a class="docstring-binding" href="#PlantMeteo.rh_from_e-Tuple{Any, Any}"><code>PlantMeteo.rh_from_e</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">rh_from_e(VPD,eₛ)</code></pre><p>Conversion between e (kPa) and rh (0-1).</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">rh_from_e(1.5,25.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/conversions.jl#L17-L27">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.rh_from_vpd-Tuple{Any, Any}"><a class="docstring-binding" href="#PlantMeteo.rh_from_vpd-Tuple{Any, Any}"><code>PlantMeteo.rh_from_vpd</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">rh_from_vpd(VPD,eₛ)</code></pre><p>Conversion between VPD and rh.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">eₛ = e_sat(Tₐ)
rh_from_vpd(1.5,eₛ)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/conversions.jl#L1-L12">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.row_struct-Tuple{PlantMeteo.TimeStepRow}"><a class="docstring-binding" href="#PlantMeteo.row_struct-Tuple{PlantMeteo.TimeStepRow}"><code>PlantMeteo.row_struct</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">row_struct(ts::TimeStepRow)</code></pre><p>Get <code>TimeStepRow</code> in its raw format, <em>e.g.</em> the <code>NamedTuple</code> that stores the values,  or the <code>Atmosphere</code> of values (or <code>Status</code> for <code>PlantSimEngine.jl</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L279-L284">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><a class="docstring-binding" href="#PlantMeteo.sample_weather-Tuple{PreparedWeather, Int64}"><code>PlantMeteo.sample_weather</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">sample_weather(prepared, step; window=RollingWindow(1.0), transforms=nothing)</code></pre><p>Sample one aggregated weather row at <code>step</code> from a <a href="#PlantMeteo.PreparedWeather"><code>PreparedWeather</code></a> sampler.</p><p><strong>Arguments</strong></p><ul><li><code>prepared::PreparedWeather</code>: output of <a href="#PlantMeteo.prepare_weather_sampler-Tuple{Any}"><code>prepare_weather_sampler</code></a>, holding source weather and optional cache.</li><li><code>step::Int</code>: 1-based index in the original fine-step weather table.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>window::AbstractSamplingWindow</code>: selection strategy used before reduction. The default <code>RollingWindow(1.0)</code> behaves as an identity window.</li><li><code>transforms</code>: optional transform override for this call. If <code>nothing</code>, uses <code>prepared.transforms</code>; otherwise accepted by <a href="#PlantMeteo.normalize_sampling_transforms-Tuple{AbstractVector{MeteoTransform}}"><code>normalize_sampling_transforms</code></a> (e.g. <code>NamedTuple</code> or <code>Vector{MeteoTransform}</code>).</li></ul><p><strong>Returns</strong></p><p>An <code>Atmosphere</code> instance built from reduced variables over the selected window. When <code>prepared.lazy == true</code>, results are memoized by <code>(step, window, transforms)</code> and reused on repeated calls.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/weather_sampling.jl#L882-L904">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.select_weather"><a class="docstring-binding" href="#PlantMeteo.select_weather"><code>PlantMeteo.select_weather</code></a> — <span class="docstring-category">Function</span></summary><section><div><pre><code class="language-julia hljs">select_weather(w, vars=setdiff(propertynames(w), ATMOSPHERE_COMPUTED))</code></pre><p>Select the variables to write in the weather data. The function returns a <code>DataFrame</code> with the selected variables.</p><p><strong>Arguments</strong></p><ul><li><code>w</code>: a <code>Tables.jl</code> interfaced table, such as a <code>TimeStepTable{Atmosphere}</code> or a <code>DataFrame</code></li><li><code>vars</code>: a vector of variables to write (as symbols). By default, all variables are written except the ones that</li></ul><p>can be recomputed (see <a href="#PlantMeteo.ATMOSPHERE_COMPUTED"><code>ATMOSPHERE_COMPUTED</code></a>). If <code>nothing</code> is given, all variables are written.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PlantMeteo, Dates

file = joinpath(dirname(dirname(pathof(PlantMeteo))),&quot;test&quot;,&quot;data&quot;,&quot;meteo.csv&quot;)
w = read_weather(
    file,
    :temperature =&gt; :T,
    :relativeHumidity =&gt; (x -&gt; x ./100) =&gt; :Rh,
    :wind =&gt; :Wind,
    :atmosphereCO2_ppm =&gt; :Cₐ,
    date_format = DateFormat(&quot;yyyy/mm/dd&quot;)
)

df = select_weather(w)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/write_weather.jl#L102-L130">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.standardize_columns!-Tuple{PlantMeteo.ToFileColumns, Any}"><a class="docstring-binding" href="#PlantMeteo.standardize_columns!-Tuple{PlantMeteo.ToFileColumns, Any}"><code>PlantMeteo.standardize_columns!</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">standardize_columns!(::ToFileColumns, df)
standardize_columns!(::ToPlantMeteoColumns, df)</code></pre><p>Standardize the column names of a <code>DataFrame</code> built upon <code>Atmosphere</code>s to be compatible with standard file systems (CSV, databases...).</p><p><strong>Arguments</strong></p><ul><li><code>df</code>: a <code>DataFrame</code> built upon <code>Atmosphere</code>s</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PlantMeteo, Dates, DataFrames

file = joinpath(dirname(dirname(pathof(PlantMeteo))),&quot;test&quot;,&quot;data&quot;,&quot;meteo.csv&quot;)

df = read_weather(
    file,
    :temperature =&gt; :T,
    :relativeHumidity =&gt; (x -&gt; x ./100) =&gt; :Rh,
    :wind =&gt; :Wind,
    :atmosphereCO2_ppm =&gt; :Cₐ,
    date_format = DateFormat(&quot;yyyy/mm/dd&quot;)
) |&gt; DataFrame

df = standardize_columns!(ToFileColumns(), df)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/variables.jl#L37-L66">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.sum_duration-Tuple{T} where T&lt;:(AbstractVector{&lt;:Period})"><a class="docstring-binding" href="#PlantMeteo.sum_duration-Tuple{T} where T&lt;:(AbstractVector{&lt;:Period})"><code>PlantMeteo.sum_duration</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">sum_duration(x::T) where {T&lt;:AbstractVector{&lt;:Dates.Period}}
sum_duration(x::T) where {T&lt;:AbstractVector{&lt;:Dates.CompoundPeriod}}</code></pre><p>Sum the durations in <code>x</code> and return a <code>Dates.Day</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/to_daily.jl#L224-L229">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.timesteps_durations-Tuple{Vector{DateTime}}"><a class="docstring-binding" href="#PlantMeteo.timesteps_durations-Tuple{Vector{DateTime}}"><code>PlantMeteo.timesteps_durations</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">timesteps_durations(datetime::Dates.DateTime; verbose=true)</code></pre><p>Duration in sensible units (e.g. 1 hour, or 1 day), computed as the  duration between a step and the previous step. The first one is unknown, so we force it as the same as all (if unique), or the second one (if not) with a warning.</p><p>The function returns a <code>Dates.CompoundPeriod</code> because it helps finding a sensible default from a milliseconds period (<em>e.g.</em> 1 Hour or 1 Day).</p><p><strong>Arguments</strong></p><ul><li><code>datetime::Vector{Dates.DateTime}</code>: Vector of dates</li><li><code>verbose::Bool=true</code>: If <code>true</code>, print a warning if the duration is not </li></ul><p>constant between the time steps.</p><p><strong>Examples</strong></p><pre><code class="language-jldocs hljs">julia&gt; timesteps_durations([Dates.DateTime(2019, 1, 1, 0), Dates.DateTime(2019, 1, 1, 1)])
2-element Vector{Dates.CompoundPeriod}:
 1 hour
 1 hour</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/duration.jl#L1-L25">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.to_daily-Tuple{Any, Vararg{Any}}"><a class="docstring-binding" href="#PlantMeteo.to_daily-Tuple{Any, Vararg{Any}}"><code>PlantMeteo.to_daily</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">to_daily(df, args...)
to_daily(t::T, args...) where {T&lt;:TimeStepTable{&lt;:Atmosphere}}</code></pre><p>Transform a <code>DataFrame</code> object or <code>TimeStepTable{&lt;:Atmosphere}</code> with sub-daily time steps (<em>e.g.</em> 1h) to a daily time-step table.</p><p><strong>Arguments</strong></p><ul><li><code>t</code>: a <code>TimeStepTable{&lt;:Atmosphere}</code> with sub-daily time steps (<em>e.g.</em> 1h)</li><li><code>args</code>: a list of transformations to apply to the data, formates as for <code>DataFrames.jl</code></li></ul><p><strong>Notes</strong></p><p>Default transformations are applied to the data, and can be overriden by the user. The default transformations are:</p><ul><li><code>:date =&gt; (x -&gt; unique(Dates.Date.(x))) =&gt; :date</code>: the date is transformed into a <code>Date</code> object</li><li><code>:duration =&gt; sum =&gt; :duration</code>: the duration is summed</li><li><code>:T =&gt; minimum =&gt; :Tmin</code>: we use the minimum temperature for Tmin</li><li><code>:T =&gt; maximum =&gt; :Tmax</code>: and the maximum temperature for Tmax</li><li><code>:Precipitations =&gt; sum =&gt; :Precipitations</code>: the precipitations are summed</li><li><code>:Rh =&gt; mean =&gt; :Rh</code>: the relative humidity is averaged</li><li><code>:Wind, :P, :Rh, :Cₐ, :e, :eₛ, :VPD, :ρ, :λ, :γ, :ε, :Δ, :clearness</code> are </li></ul><p>all averaged</p><ul><li><code>[:Ri_SW_f, :duration] =&gt; ((x, y) -&gt; sum(x .* Dates.toms.(y)) * 1.0e-9) =&gt; :Ri_SW_f</code>: the irradiance is integrated, so its unit changes from W m⁻² to MJ m⁻² d⁻¹</li><li>All other irradiance variables are also integrated (see the code for details)</li></ul><p>Note that the default transformations can be overriden by the user, and that the default transformations are only applied if the variable is available.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PlantMeteo, Dates
# Forecast for today and tomorrow:
period = [today(), today()+Dates.Day(1)]
w = get_weather(48.8566, 2.3522, period)
# Convert to daily:
w_daily = to_daily(w, :T =&gt; mean =&gt; :Tmean)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/to_daily.jl#L1-L42">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.vapor_pressure-Tuple{Any, Any}"><a class="docstring-binding" href="#PlantMeteo.vapor_pressure-Tuple{Any, Any}"><code>PlantMeteo.vapor_pressure</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">vapor_pressure(Tₐ, Rh; check=true)</code></pre><p>Vapor pressure (kPa) at given temperature (°C) and relative hunidity (0-1).</p><p><strong>Arguments</strong></p><ul><li><code>Tₐ</code> (Celsius degree): air temperature</li><li><code>Rh</code> (0-1): relative humidity</li><li><code>check</code> (Bool): if true, check that <code>Rh</code> is between 0 and 1</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">vapor_pressure(25.0, 0.4)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/variables_computations.jl#L1-L17">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.vpd-Tuple{Any, Any}"><a class="docstring-binding" href="#PlantMeteo.vpd-Tuple{Any, Any}"><code>PlantMeteo.vpd</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">vpd(Rh,Tₐ)</code></pre><p>Compute vapor pressure deficit (kPa) from the air relative humidity (0-1) and temperature (°C).</p><p>The computation simply uses vpd = eₛ - e.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">vpd(0.4,25.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/conversions.jl#L33-L45">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.vpd_from_e-Tuple{Any, Any}"><a class="docstring-binding" href="#PlantMeteo.vpd_from_e-Tuple{Any, Any}"><code>PlantMeteo.vpd_from_e</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">vpd_from_e(e,Tₐ)</code></pre><p>Compute vapor pressure deficit (kPa) from the air vapor pressure (kPa) and temperature (°C).</p><p>The computation simply uses vpd = eₛ - e.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">vpd_from_e(1.5,25.0)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/computations/conversions.jl#L50-L62">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.write_weather-Tuple{String, Any}"><a class="docstring-binding" href="#PlantMeteo.write_weather-Tuple{String, Any}"><code>PlantMeteo.write_weather</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">write_weather(
    file, w; 
    vars=setdiff(propertynames(w), ATMOSPHERE_COMPUTED),
    duration=Dates.Minute
)</code></pre><p>Write the weather data to a file. </p><p><strong>Arguments</strong></p><ul><li><code>file</code>: a <code>String</code> representing the path to the file to write</li><li><code>w</code>: a <code>TimeStepTable{Atmosphere}</code></li><li><code>vars</code>: a vector of variables to write (as symbols). By default, all variables are written except the ones that </li></ul><p>can be recomputed (see <a href="#PlantMeteo.ATMOSPHERE_COMPUTED"><code>ATMOSPHERE_COMPUTED</code></a>). If <code>nothing</code> is given, all variables are written.</p><ul><li><code>duration</code>: the unit for formating the duration of the time steps. By default, it is <code>Dates.Minute</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using PlantMeteo, Dates

file = joinpath(dirname(dirname(pathof(PlantMeteo))),&quot;test&quot;,&quot;data&quot;,&quot;meteo.csv&quot;)
w = read_weather(
    file,
    :temperature =&gt; :T,
    :relativeHumidity =&gt; (x -&gt; x ./100) =&gt; :Rh,
    :wind =&gt; :Wind,
    :atmosphereCO2_ppm =&gt; :Cₐ,
    date_format = DateFormat(&quot;yyyy/mm/dd&quot;)
)

write_weather(&quot;meteo.csv&quot;, w)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/write_weather.jl#L1-L35">source</a></section></details></article><article><details class="docstring" open="true"><summary id="PlantMeteo.write_weather_-Tuple{String, Any}"><a class="docstring-binding" href="#PlantMeteo.write_weather_-Tuple{String, Any}"><code>PlantMeteo.write_weather_</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">write_weather_(file, w)</code></pre><p>Write the weather data to a file with a special-commented yaml header for the metadata.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/APIs/write_weather.jl#L161-L165">source</a></section></details></article><article><details class="docstring" open="true"><summary id="Tables.getcolumn-Tuple{PlantMeteo.TimeStepRow, Any}"><a class="docstring-binding" href="#Tables.getcolumn-Tuple{PlantMeteo.TimeStepRow, Any}"><code>Tables.getcolumn</code></a> — <span class="docstring-category">Method</span></summary><section><div><pre><code class="language-julia hljs">Tables.getcolumn(row::TimeStepRow, nm::Symbol)
Tables.getcolumn(row::TimeStepRow, nm::Int)</code></pre><p>Get the value of a variable in a <code>TimeStepRow</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/PalmStudio/PlantMeteo.jl/blob/c2cb704f04dc8f3aa031dcecfa145471dc011f76/src/structs/TimeStepTable.jl#L289-L294">source</a></section></details></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../weather-sampling/">« Weather Sampling</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Monday 16 February 2026 16:16">Monday 16 February 2026</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
